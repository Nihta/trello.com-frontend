import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import { useEffect, useState } from 'react';
import { useSmartLinkContext } from '../context';
import { getUrl } from '../helpers';
export function useSmartCardState(url) {
  var _useSmartLinkContext = useSmartLinkContext(),
      store = _useSmartLinkContext.store; // Initially, card state should be pending and 'empty'.


  var _useState = useState(getUrl(store, url)),
      _useState2 = _slicedToArray(_useState, 2),
      state = _useState2[0],
      setState = _useState2[1]; // Selector for initial and subsequent states.


  useEffect(function () {
    var unsubscribe = store.subscribe(function () {
      setState(getUrl(store, url));
    });
    return function () {
      return unsubscribe();
    };
  }, [url, store]); // State for use in view components.

  return state;
}